{% extends 'base.html' %}

{% block content %}
<div class="container mt-4 mb-5 text-center">
  <div class="row">
    <div class="col-md-12">
      <h2 class="">Discover Blogs</h2>
      <hr>
    </div>
  </div>
  <div class="row">
    <div class="col-md-3"></div>
    <div class="col-md-6 d-flex align-items-center justify-content-center">
      <form class="form-inline w-100 mt-3">
        <div class="input-group w-100">
          <input class="form-control" type="search" placeholder="&#128269; Search Blogs" aria-label="Search Blogs">
        </div>
      </form>
    </div>
    <div id="create-blog-btn" class="col-md-3 mt-3">
      <a href="{% url 'create_blog' %}" class="btn btn-warning" aria-label="Create a blog">Create a Blog</a>
    </div>
  </div>
</div>


{% if blogs %}
<ul>
  {% for blog in blogs %}
  <li>
    {% if blog.image %}
    <img src="{{ blog.image.url }}" alt="{{ blog.title }} Image" style="max-width: 100%; max-height: 200px;">
    {% endif %}
    <h3><a href="{% url 'blog_detail' blog.id %}">{{ blog.title }}</a></h3>
    <p>Author: {% if blog.author %}{{ blog.author.username }}{% else %}Anonymous{% endif %}</p>
    <p>Content: {{ blog.content }}</p>
    <p>Created at: {{ blog.created_at }}</p>
    <p>Likes: {{ blog.likes_count }}</p>
    <p>Comments: {{ blog.comments.count }}</p>
    <p><small>Interests: {% for interest in blog.interests.all %}{{ interest.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</small></p>
    <a href="{% url 'blog_detail' blog.id %}">Go to post</a>
  </li>
  {% endfor %}
</ul>
{% else %}
<p>No blogs available.</p>
{% endif %}
{% endblock %}